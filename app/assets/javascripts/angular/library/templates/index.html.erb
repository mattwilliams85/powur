<ng-include src="'<%=asset_path("shared/header-signed-in.html") %>'"></ng-include>

<main class="powur-library">

<!-- Header Label/Dropdown Resource Type Picker -->
  <div class="row bump">
    <div class="large-4 medium-4 small-4 columns">
      <div class="media-select">
        <div class="tag"></div>
        <select ng-options="type as type.name for type in resourceTypes" ng-model="resourceType" ng-change="resourceTypeChange();" ng-selected="resourceTypes[0]"></select>
      </div>
    </div>

    <div class="large-4 medium-4 small-6 columns">
      <!-- <input type="search"></input> -->
    </div>
  </div>

  <!-- Library Resources Grid -->
  <div class="row">
    <ul class="large-block-grid-5 medium-block-grid-3 small-block-grid-2">
      <li ng-repeat="item in items" class="resource" ng-click="showResource(item)">
        <!-- Thumbnails or Media icons -->
        <div class="media-info">
          <img class="media-thumbnail" ng-if="item.properties.thumbnail_path !== null" src="{{item.properties.thumbnail_path}}">
          <img class="media-icon" ng-if="item.properties.thumbnail_path === null && item.properties.file_type === 'application/pdf'" src="<%= image_path('library/pdf.png')%>">
          <img class="media-icon" ng-if="item.properties.thumbnail_path === null && item.properties.file_type === 'video/mp4'" src="<%= image_path('library/video.png')%>">
          <!-- Media Title -->
          <div class="text">{{ item.properties.title }}</div>
        </div>
        <!-- Modal for Showing a Library Resource -->
        <div class="hidden" id="item_{{item.properties.id}}">
          <div class="row">
            <div class="large-12 columns">
              <h1>{{item.properties.title}}</h1>
            </div>
          </div>
          <!-- Modal Content: If PDF Document -->
          <div class="row" ng-if="item.properties.file_type === 'application/pdf'">
            <div class="large-6 columns">
              <div class="pdf-preview">
                <img src="<%= image_path('library/pdf-preview.png') %>">
              </div>
              <div class="pdf-download" ng-if="item.properties.file_type === 'application/pdf'">
                <a class="button expand radius success" href="{{item.properties.file_original_path}}">Download this PDF</a>
              </div>
            </div>
            <div class="large-6 columns">
              <p>{{item.properties.description}}</p>
            </div>
          </div>
          <!-- Modal Content: If Video -->
          <div class="row" ng-if="item.properties.file_type === 'video/mp4'">
            <div class="large-8 columns">
              <video ng-if="item.properties.file_type === 'video/mp4'" width="100%" controls>
                <source src="{{item.properties.file_original_path}}" type="video/mp4">
              </video>
            </div>
            <div class="large-4 columns">
              <p>{{item.properties.description}}</p>
            </div>
          </div>
        </div>
        <!-- /Modal -->
      </li>
    </ul>
  </div>
  <div class="row" ng-if="(pages.page_count >= 2)">
    <div class="load-more" ng-if="(pages.current_page !== pages.page_count)">
      <a ng-click="resourcePageChange(pages.current_page + 1)">Load More</a>
    </div>
  </div>
</main>

<ng-include src="'<%=asset_path("shared/footer-signed-in.html") %>'"></ng-include>
