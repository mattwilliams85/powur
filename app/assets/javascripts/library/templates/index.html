<ng-include src="'shared/header-signed-in.html'"></ng-include>

<main class="powur-library">
  <div class="row bump">
    <div class="large-3 medium-4 small-12 columns">
      <form name="searchForm" ng-submit="getResources()" novalidate>
        <input ng-model="searchText" type="search" class="search-field"></input>
      </form>
    </div>

    <div class="large-3 medium-4 small-12 columns last right">
      <select ng-model="filterTopic" ng-options="topic.id as topic.title for topic in allActiveTopics" ng-change="getResources()" class="filter">
        <option value="">All topics</option>
      </select>
    </div>

    <div ng-if="showSearchMessage" class="large-12 columns">
      <span>Search for '{{ searchText }}' returned {{ resourceCount }} results:</span>
    </div>
  </div>

  <div ng-repeat="topic in topics.entities" class="topic-wrapper">
    <div class="row">
      <div class="large-6 medium-6 columns">
        <div class="section-label">
          <div class="tag"><img ng-src="{{topic.image_original_path}}"></div>
          <div class="text">{{topic.title}}</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div ng-repeat="item in resources[topic.id]" class="large-3 medium-6 small-12 columns left" ng-click="showResource(item)">
        <ng-include src="'library/resource-item.html'"></ng-include>
      </div>
    </div>
  </div>
</main>

<ng-include src="'shared/footer.html'"></ng-include>
