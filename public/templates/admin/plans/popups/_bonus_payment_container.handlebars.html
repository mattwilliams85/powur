<div id="js-popup">
    <legend style="color:#333; text-transform:uppercase; font-size:18px;">{{{this.title}}}</legend>
    <span class="subtext summary js-popup_content_container">
        {{this.properties.rank_path}}
        <form id="js-popup_form">
            {{#if this.amountDetail.paths}}
            <div>
                <label>Bonus Path</label>
                <select name="{{this.amountDetail.paths.name}}" id="{{this.amountDetail.paths.name}}">
                    <option value="">All Paths</option>
                    {{#each this.amountDetail.paths.options}}
                        <option value={{@key}}>{{this}}</option>
                    {{/each}}
                </select>
            </div>
            <br style="clear:both;">        
            <hr>
            {{/if}}

            <span class="form_row" style="padding-bottom:8px; padding-top:0px; border-bottom:1px dashed #ccc; margin-bottom:16px; font-size:12px; text-transform:uppercase;">
                {{#if this.amountDetail.total}}<span style="padding-right:20px;">Bonus Total: ${{this.amountDetail.total}}</span>{{/if}}
                <br>
                Entry Mode: <a href="#" class="js-bonus_payment_mode_percentage">Rounded</a>  |  <a href="#" class="js-bonus_payment_mode_dollar">Exact</a>
            </span>
            <div>
                <div id="bonus_payment_mode_percentage" class="active">
                {{#each this.amountDetail.value}}
                    <span class="form_row" style="padding-bottom:8px; padding-top:0px; " data-amount-array-index="{{@index}}">
                        <div class="js-percentage_container" data-amount-array-index="{{@index}}" data-max-percentage="{{#index_of ../this.amountDetail.max_values @index}}{{/index_of}}" data-amount-percentage="{{this}}">
                            <div class="js-percentage_bar"></div>
                            <div class="js-percentage_label">Rank {{math @index "+" 1}}</div>
                        </div>

                    </span>     
                {{/each}}
                </div>

                <div id="bonus_payment_mode_dollar" style="display:none;">
                {{#each this.amountDetail.value}}
                    <span class="form_row" style="padding-bottom:8px; padding-top:0px; width:120px; float:left; clear:none;" data-amount-array-index="{{@index}}">
                        <label>Rank {{math @index "+" 1}}</label>
                        <input  data-amount-array-index="{{@index}}" type="text" value="{{math this "*" 100}}%" style="width:115px; float:left;">
                    </span>     
                {{/each}}
                </div>
            </div>
            <br style="clear:both;">
            {{#if this.buttonText}}
                <button class="js-update_bonus_payment button">{{{this.buttonText}}}</button>
            {{else}}
                <button class="js-update_bonus_payment button">Update Payments</button>
            {{/if}}
            {{#if this.deleteOption}}
            <br><br><br>
            <legend style="color:#333; text-transform:uppercase; font-size:18px;">{{this.deleteOption.name}}</legend>

            <hr style="border-top:1px dashed #555;">
            <p>{{this.deleteOption.description}}</p>
                {{#if this.deleteOption.buttonName}}
                    <a href="#{{this.id}}" class="js-delete js-confirm button quiet {{this.deleteOption.buttonName}}">delete</a>
                {{/if}}
            {{/if}}
        </form>
    <span>
</div>


